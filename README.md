# Movie Recommendation Bot

Этот проект представляет собой Telegram-бота для рекомендаций фильмов. Бот использует описание фильмов и сравнивает их с запросами пользователей для предложения похожих фильмов. Бот также поддерживает поиск фильмов по году выхода.

## Структура проекта

```
.
├── docker-compose.yml      # Файл для настройки и запуска контейнеров с помощью Docker Compose
├── Dockerfile              # Файл для создания Docker-образа для проекта
├── scripts
│   └── run.sh             # Скрипт для запуска приложения
└── src
    ├── app.py             # Основной код приложения с логикой бота
    └── requirements.txt   # Список зависимостей Python
```

## Требования

- Python 3.8 или выше
- Docker и Docker Compose

## Установка

### 1. Клонируйте репозиторий

```bash
git clone https://github.com/your-username/movie-recommendation-bot.git
cd movie-recommendation-bot
```

### 2. Установите зависимости

Если вы хотите установить зависимости локально, используйте:

```bash
pip install -r src/requirements.txt
```

Однако, для запуска в контейнере Docker, вам не нужно устанавливать зависимости вручную, так как это будет сделано внутри контейнера.

## Настройка

Перед запуском бота, вам нужно настроить несколько переменных окружения:

1. **`BOT_TOKEN`**: Токен вашего Telegram-бота.
2. **`DB_URL`**: URL базы данных с фильмами (например, ссылка на CSV-файл).
3. **`DB_FILE`**: Локальный путь к файлу для сохранения данных.
4. **`DB_SHEET_NAME`**: Название листа в базе данных.

Эти переменные можно указать в файле `.env`, который будет автоматически подхвачен системой.

Пример `.env` файла:

```
BOT_TOKEN=your_telegram_bot_token
DB_URL=your_spreadsheet_url
DB_FILE=movie_database.csv
DB_SHEET_NAME=movies
```

## Запуск с использованием Docker

1. Запустите контейнер с помощью Docker Compose:

```bash
docker-compose up --build
```

Это создаст и запустит необходимые контейнеры для вашего приложения.

## Запуск без Docker

1. Запустите скрипт для загрузки базы данных и запуска бота:

```bash
source .env
cd src
python3 app.py
```

## Описание файлов

- **`docker-compose.yml`**: Конфигурация для запуска проекта в контейнерах Docker. Включает настройку для запуска приложения и управления зависимостями.
- **`Dockerfile`**: Описание процесса сборки Docker-образа, включая установку всех зависимостей.
- **`scripts/run.sh`**: Скрипт для запуска приложения, который используется для автоматизации процесса запуска внутри venv
- **`src/app.py`**: Основной код бота. В этом файле настроена логика для обработки запросов пользователей, поиска похожих фильмов и отправки результатов.
- **`src/requirements.txt`**: Список всех зависимостей Python, которые требуются для работы приложения.

## Логи

Логи работы бота сохраняются в консоль и могут быть полезны для отладки. Логи включают информацию о запуске, успешных операциях, а также о возникающих ошибках.

## Важные замечания

1. Убедитесь, что ваш токен бота (`BOT_TOKEN`) и URL базы данных (`DB_URL`) корректны и доступны.
2. Если база данных большая, процесс загрузки данных может занять некоторое время.
3. При проблемах с Telegram API рекомендуется проверять доступность API и настройки бота.
